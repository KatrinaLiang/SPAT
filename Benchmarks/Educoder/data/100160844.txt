package step4;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
public class Task {
    
    //获取Docment对象
	public Document getDoc(String url) throws IOException{
        Document doc = Jsoup.parse(new File("./backups/hotels.ctrip.com_domestic-city-hotel.txt"), "utf-8", url);
		return doc;
	}
    
    /**
	 * 获取所有城市返回城市信息集合
	 * @param doc	
	 * @return
	 */
	public List<HotelCity> getAllCitys(Document doc){
		Element element = doc.getElementsByClass("pinyin_filter_detail layoutfix").first();
		Elements tagsdt = element.getElementsByTag("dt");
		List<HotelCity> list = new ArrayList<HotelCity>();
		for(Element tagdt : tagsdt) {
			Elements tagsa = tagdt.nextElementSibling().children();
			for(Element taga : tagsa) {
				HotelCity hc = new HotelCity();
				String headPinyin = tagdt.text();
				String city = taga.text();
				String cityId = StringUtil.getNumbers(taga.attr("href"));
				String pinyin = taga.attr("href").replaceAll("[0-9]*", "").replaceAll("/hotel/", "");
				hc.setCityId(cityId);
				hc.setPinyin(pinyin);
				hc.setCityName(city);
				hc.setHeadPinyin(headPinyin);
				list.add(hc);
			}
			
		}
		return list;
	}
}
