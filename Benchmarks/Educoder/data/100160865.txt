package step4;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
public class Task {
    
    //通过filePath文件路径获取Docment对象
	public Document getDoc(String filePath) throws IOException{
         File in=new File(filePath);    
		 Document doc=Jsoup.parse(in,"utf-8");
	     return doc;
	}
    
    /**
	 * 获取所有城市返回城市信息集合
	 * @param doc	
	 * @return
	 */
	public List<HotelCity> getAllCitys(Document doc){
		List<HotelCity> lists = new ArrayList<HotelCity>();
		Elements e=doc.getElementsByClass("pinyin_filter_detail layoutfix");
		Elements tagsdt=e.select("dt");
		for(Element tagdt:tagsdt) {
			String headPinyin=tagdt.text();
			Elements tagdd=tagdt.nextElementSibling().children();
			for(Element taga:tagdd) {
				String cityName=taga.text();//
				String cityId=StringUtil.getNumbers(taga.attr("href"));//城市id
				String pinyin=taga.attr("href").replace("/hotel/","").replaceAll("[0-9]*","");//城市拼音
				//System.out.println(headPinyin+"\n"+cityName+"\n"+cityId+"\n"+pinyin+"\n");
				 HotelCity list = new HotelCity();
		            list.setCityId(cityId); //截取cityId
		            list.setCityName(cityName);
		            list.setHeadPinyin(headPinyin);
		            list.setPinyin(pinyin);
		            lists.add(list);
			}
			
		}
		
		
		
        
		return lists;
	}
}
